<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Thiết Lập Lì Xì</title>
    <style>
        body { background: #8b0000; color: gold; font-family: sans-serif; text-align: center; padding: 50px; }
        .config-group { background: #d32f2f; padding: 20px; border-radius: 10px; display: inline-block; }
        .row { margin: 10px 0; font-size: 1.2rem; }
        button { padding: 10px 20px; cursor: pointer; background: gold; border: none; font-weight: bold; border-radius: 5px; }
        #link-box { margin-top: 20px; display: none; background: white; color: black; padding: 15px; }
    </style>
</head>
<body>
    <h1>⚙️ THIẾT LẬP KHO LÌ XÌ</h1>
    <div class="config-group" id="setup">
        <div class="row">10k: <input type="number" id="v10" value="5"></div>
        <div class="row">20k: <input type="number" id="v20" value="3"></div>
        <div class="row">50k: <input type="number" id="v50" value="2"></div>
        <div class="row">100k: <input type="number" id="v100" value="1"></div>
        <button onclick="createGame()">TẠO LINK GỬI BẠN BÈ</button>
    </div>

    <div id="link-box">
        <p>Gửi link này cho bạn bè:</p>
        <strong id="final-link"></strong>
    </div>

    <script type="module">
        // --- DÁN FIREBASE CONFIG CỦA BẠN VÀO ĐÂY ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIza...",
            databaseURL: "https://your-project-id.firebaseio.com",
            projectId: "your-project-id",
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        window.createGame = function() {
            let pool = [];
            [10, 20, 50, 100].forEach(v => {
                let count = document.getElementById('v'+v).value;
                for(let i=0; i<count; i++) pool.push({val: v, status: 'available'});
            });
            
            // Xáo trộn ngẫu nhiên
            pool.sort(() => Math.random() - 0.5);

            set(ref(db, 'lixi_pool'), pool).then(() => {
                document.getElementById('setup').style.display = 'none';
                document.getElementById('link-box').style.display = 'block';
                // Link trỏ tới file user.html của bạn
                document.getElementById('final-link').innerText = window.location.href.replace('admin.html', 'user.html');
            });
        }
    </script>
</body>
</html>